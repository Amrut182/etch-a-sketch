<html>
    <header>
        <link href="style.css" rel="stylesheet" type="text/css" media="all"/>
    </header>

    <head>
        <title>Etch a Sketch</title>
        <meta charset="UTF-8"/>
    </head>
    <body>
        <h1>Etch a Sketch</h1>
        <div id="buttons">
            <button id="btn1">Clear</button>
            <button id="btn2">Make Grid</button>
        </div>
        <div id="container"></div>
        
        <script>
            const container = document.querySelector('#container');
            const btn1 = document.querySelector('#btn1');
            let choice = 16;
            let previousChoice = 16;
            let clickCounter = 0;



            function createGrid(item) {
                for(let i = 0; i < item; i++) {
                    for(let j = 0; j < item; j++) {
                        let div = document.createElement('div');
                        div.id = 'Grid';

                        if(item < 22) {
                            div.style.height = (400/item) - 2 ;
                            div.style.width = (400/item) - 2;
                        }
                        else {
                            continue;
                        }

                        container.appendChild(div);
                        
                        div.onmouseover = function () {
                            div.style.backgroundColor = 'black';
                        };
                    }
                }
            }

            function clearGrid(item) {
                for(let i = 0; i < item; i++) {
                    for(let j = 0; j < item; j++) {
                        let element = document.getElementById('Grid');
                        element.parentNode.removeChild(element);
                    }
                }
            }

            function createInitialGrid() {
                createGrid(16);
            }

            function clearInitialGrid() {
                clearGrid(16);
            }

            function createNextGrid() {
                createGrid(choice);
            }

            function clear() {
                if(clickCounter == 0) {
                    clearInitialGrid();
                    clickCounter++;
                }
                else {
                    clearGrid(previousChoice); //previous choice needed to clear the previous grid
                }
            }

            function clearOnly(item) {
                clear();
                createGrid(item);
            }

            btn1.addEventListener('click', () => {
                clearOnly(previousChoice); //Clears grid on screen
            });

            btn2.addEventListener('click', () => {
                choice = prompt("Enter the size of grid (1-21)");
                if(choice > 21) {
                    choice = prompt("Please Enter between 1 & 21)");
                }
                clear();
                createNextGrid(); //Creates a new grid based on user input
                previousChoice = choice;
            })

            createInitialGrid(); //Creates 16X16 grid 

        </script>
    </body>
</html>